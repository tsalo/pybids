

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. layout: Querying BIDS datasets &mdash; bids 0.6.5+88.gb418631 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="bids 0.6.5+88.gb418631 documentation" href="../index.html"/>
        <link rel="up" title="User guide: table of contents" href="../user_guide.html"/>
        <link rel="next" title="3. analysis: Model specification for BIDS datasets" href="../analysis/index.html"/>
        <link rel="prev" title="1. Introduction: What is pybids?" href="../introduction.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> bids
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User guide: table of contents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction: What is pybids?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. <code class="docutils literal"><span class="pre">layout</span></code>: Querying BIDS datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loading-bids-datasets">2.1. Loading BIDS datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#querying-datasets">2.2. Querying datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-metadata">2.3. Extracting metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html">3. <code class="docutils literal"><span class="pre">analysis</span></code>: Model specification for BIDS datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reports/index.html">4. <code class="docutils literal"><span class="pre">reports</span></code>: Data acquisition report generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">bids</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../user_guide.html">User guide: table of contents</a> &raquo;</li>
        
      <li>2. <code class="docutils literal"><span class="pre">layout</span></code>: Querying BIDS datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/layout/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="layout-querying-bids-datasets">
<span id="reports"></span><h1>2. <code class="docutils literal"><span class="pre">layout</span></code>: Querying BIDS datasets<a class="headerlink" href="#layout-querying-bids-datasets" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first"><strong>Contents</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#loading-bids-datasets" id="id2">Loading BIDS datasets</a></li>
<li><a class="reference internal" href="#querying-datasets" id="id3">Querying datasets</a></li>
<li><a class="reference internal" href="#extracting-metadata" id="id4">Extracting metadata</a></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="loading-bids-datasets">
<span id="loading-datasets"></span><h2><a class="toc-backref" href="#id2">2.1. Loading BIDS datasets</a><a class="headerlink" href="#loading-bids-datasets" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../generated/bids.layout.BIDSLayout.html#bids.layout.BIDSLayout" title="bids.layout.BIDSLayout"><code class="xref py py-obj docutils literal"><span class="pre">bids.layout.BIDSLayout</span></code></a> class requires the path to a valid BIDS dataset:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">join</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bids</span> <span class="k">import</span> <span class="n">BIDSLayout</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bids.tests</span> <span class="k">import</span> <span class="n">get_test_data_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span> <span class="o">=</span> <span class="n">BIDSLayout</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">get_test_data_path</span><span class="p">(),</span> <span class="s1">&#39;synthetic&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">BIDSLayout</span></code> instance is a lightweight container for all of the files in the
BIDS project directory. It automatically detects any BIDS entities found in the
file paths, and allows us to perform simple but relatively powerful queries over
the file tree. By default, defined BIDS entities include things like “subject”,
“session”, “run”, and “type”.</p>
</div>
<div class="section" id="querying-datasets">
<span id="id1"></span><h2><a class="toc-backref" href="#id3">2.2. Querying datasets</a><a class="headerlink" href="#querying-datasets" title="Permalink to this headline">¶</a></h2>
<p>Pybids layouts can be queried according to a number of parameters, using
grabbit’s <code class="docutils literal"><span class="pre">get</span></code> functionality.</p>
<p>For example, if we want to get a list of subjects in the dataset:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">()</span>
<span class="go">[&#39;01&#39;, &#39;02&#39;, &#39;03&#39;, &#39;04&#39;, &#39;05&#39;]</span>
</pre></div>
</div>
<p>We can also get a list of all available sessions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_sessions</span><span class="p">()</span>
<span class="go">[&#39;01&#39;, &#39;02&#39;]</span>
</pre></div>
</div>
<p>Or a list of tasks:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_tasks</span><span class="p">()</span>
<span class="go">[&#39;nback&#39;, &#39;rest&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="extracting-metadata">
<h2><a class="toc-backref" href="#id4">2.3. Extracting metadata</a><a class="headerlink" href="#extracting-metadata" title="Permalink to this headline">¶</a></h2>
<p>A number of <code class="docutils literal"><span class="pre">BIDSLayout</span></code> methods extract metadata associated with files.</p>
<p>For example, if we want event (task timing) information for a given fMRI scan, we can use <code class="docutils literal"><span class="pre">get_events</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;nback&#39;</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_events</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also extract metadata from the json files associated with a scan file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;nback&#39;</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../analysis/index.html" class="btn btn-neutral float-right" title="3. analysis: Model specification for BIDS datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../introduction.html" class="btn btn-neutral" title="1. Introduction: What is pybids?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 - 2018, Developers of pybids.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.6.5+88.gb418631',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>